{
  "$id": "https://schemas.tillhub.com/v1/transactions.get-all.response.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "msg": {
      "type": "string",
      "minLength": 1,
      "example": "Queried transactions sucessefully.",
      "description": "Any English sentence, meant as information for developers and implementers. Avoid displaying this to the users and especially do not expect thos messages to stay stable."
    },
    "msg_localised": {
      "type": "string",
      "minLength": 1,
      "example": "Queried transactions sucessefully.",
      "description": "Optional localised message that can be displayed to the user if existing. The language can be set by in the request or will fallback to English."
    },
    "request": {
      "type": "object",
      "additionalProperties": false,
      "description": "Information about the request itself.",
      "properties": {
        "id": {
          "type": "string",
          "description": "The request uuid that can be used to identify and trace API calls.",
          "format": "uuid"
        },
        "host": {
          "type": "string",
          "minLength": 1,
          "example": "https://api.tillhub.com",
          "description": "Server host and protocol from which request was handled."
        }
      }
    },
    "cursor": {
      "type": "object",
      "additionalProperties": false,
      "description": "Optional cursor in pagable API calls. The cursor next field must be called as fully qualifyable URI in order to hit the next page",
      "properties": {
        "next": {
          "type": "string",
          "format": "uri",
          "description": "The URI pointing to the next page.",
          "example": "https://api.tillhub.com/api/v1/products/061f91a3-eba2-40b8-9a76-115189d6741e?first=2018-07-02T21%3A47%3A44.382Z&page=0&size=10&cursor_field=updated_at"
        },
        "first": {
          "type": "string",
          "format": "uri",
          "description": "The URI pointing to the the first page.",
          "example": "https://api.tillhub.com/api/v1/products/061f91a3-eba2-40b8-9a76-115189d6741e?first=2018-07-02T21%3A47%3A44.382Z&page=1&size=10&cursor_field=updated_at"
        },
        "self": {
          "type": "string",
          "format": "uri",
          "description": "The URI pointing to this page.",
          "example": "https://api.tillhub.com/api/v1/products/061f91a3-eba2-40b8-9a76-115189d6741e?first=2018-07-02T21%3A47%3A44.382Z&page=0&size=10&cursor_field=updated_at"
        }
      }
    },
    "count": {
      "type": "number",
      "description": "the length of the results array.",
      "example": 10
    },
    "results": {
      "type": "array",
      "description": "The envelope of items, that are usually objects. We are generally sending back arrays even if there was just one requested resource.",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "example": "860defb8-5598-421d-9da4-f0826e767536",
            "format": "uuid",
            "description": "The uuid v4 that is generated on the API when a transaction is received. This id can be used for idempotency"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "example": "2018-11-04T23:18:43.075Z",
            "description": "The server creation time of this transaction."
          },
          "channel": {
            "type": "string",
            "example": "api",
            "description": "The channel of which this transaction originated from. Usually this is the API, but may be experimental implementations of other channels.",
            "enum": [
              "api",
              "blockchain"
            ]
          },
          "client_account": {
            "type": "string",
            "minLength": 32,
            "maxLength": 36,
            "example": "061f91a3-eba2-40b8-9a76-115189d6741e",
            "description": "The Tillhub client account ID. Note: this will usually be a uuid v4, however you might receive a capitalised dash-stripped version of it, if you hold a legsacy account."
          },
          "receipt": {
            "type": "string",
            "format": "uuid",
            "example": "06624521-f101-4e59-99d6-5ccfe284eade",
            "description": "The Tillhub merchant receipt resource ID.",
            "default": null
          },
          "receipts": {
            "oneOf": [
              {
                "type": "array",
                "default": null,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "type",
                    "text"
                  ],
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "customer",
                        "merchant"
                      ]
                    },
                    "text": {
                      "type": "string",
                      "maxLength": 16384
                    }
                  }
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "example": "2018-01-29T14:55:05.000Z",
            "description": "A user defined [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) compliant date e.g. 2018-01-29T14:55:05.000Z. This is used to track local client time as oppsed to `created_at`, which is the time the server has received it. This is necessary for e.g. offline client, and is valid time in fiscal reports."
          },
          "type": {
            "type": "string",
            "description": "The supported transaction types",
            "enum": [
              "sale",
              "sale_cancel",
              "invoice",
              "invoice_cancel",
              "expense",
              "expense_cancel",
              "deposit",
              "deposit_cancel",
              "bank_deposit",
              "bank_deposit_cancel",
              "bank_expense",
              "bank_expense_cancel"
            ]
          },
          "client_id": {
            "oneOf": [
              {
                "type": "string",
                "example": "d0d40841-b1a7-438a-9d1e-2bfec590d2e3",
                "minLength": 6,
                "maxLength": 64,
                "description": "A implementer defined identifier. This can be used for local resource matching and has no business implication."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "custom_id": {
            "oneOf": [
              {
                "type": "string",
                "example": "Sale Nr.1",
                "maxLength": 128,
                "description": "Any string that a user wants to store to identify a transaction, or wants to make it human readable."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "branch": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "f2ac2cae-97ff-42a1-967b-0a35222ab6d1",
                "description": "The Tillhub branch location ID."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "register": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "9d110eb2-2245-4e14-9574-49b502f3a9b3",
                "description": "The Tillhub register location ID."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "client": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "cd110eb2-2245-4e14-9574-49b502f3a9b3",
                "description": "(MANDANT) The Tillhub client location ID."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "staff": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "b3465a62-62e9-46de-9df7-4d3009c46068",
                "description": "The Tillhub staff resource ID, that has generated this transaction."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "cashier_staff": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "378a5f19-44c6-4ed1-9ad1-45ec103f1414",
                "description": "The Tillhub staff (as cashier) resource ID, that has generated this transaction."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "device": {
            "oneOf": [
              {
                "type": "string",
                "minLength": 6,
                "maxLength": 64,
                "example": "ec1b41af291c4b9483d8adb4e80ac92f",
                "description": "The Tillhub POS client ID, that was generated upon install, that has generated this transaction."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "balance_last": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "9d20d799-b6e0-46a0-9e48-7ca372af13d4",
                "description": "The Tillhub balance resource ID of the last balance."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "balance_custom_id_last": {
            "oneOf": [
              {
                "type": "string",
                "example": "12",
                "description": "The last balance's `custom_id`, that usually fiscally referred to as the balance number."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "balance_custom_id_next": {
            "oneOf": [
              {
                "type": "string",
                "example": "13",
                "description": "The next desired balance number on that register."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "external_reference_id": {
            "oneOf": [
              {
                "type": "string",
                "example": "823742686434462376376376473647346",
                "maxLength": 128,
                "description": "Any identifier a user wants to store in the transaction system. E.g. an ID in a thirdy party ERP."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "external_reference": {
            "oneOf": [
              {
                "type": "object",
                "description": "A generic reference container as a user defined object.",
                "maxProperties": 10
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "customer": {
            "oneOf": [
              {
                "type": "string",
                "format": "uuid",
                "example": "e3ba6efa-0fc2-4298-96e3-5f9f79ef2633",
                "description": "The Tillhub customer resource ID, that this transaction has been generated for."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "customer_external_reference_id": {
            "oneOf": [
              {
                "type": "string",
                "maxLength": 128,
                "example": "135543344343",
                "description": "An user defined customer reference."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "comments": {
            "oneOf": [
              {
                "type": "string",
                "example": "Did this sale. Went to the next one.",
                "maxLength": 8192,
                "description": "Any arbitrary comment."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "code": {
            "oneOf": [
              {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "format",
                  "data"
                ],
                "properties": {
                  "format": {
                    "type": "string",
                    "enum": [
                      "qr",
                      "aztec",
                      "code128"
                    ]
                  },
                  "data": {
                    "type": "string",
                    "example": "{\"data_for_a\": \"qr_code\"}",
                    "maxLength": 16384,
                    "description": "A barcade container of any type with which this transaction is associated."
                  },
                  "caption": {
                    "default": null,
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 128
                  }
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "metadata": {
            "oneOf": [
              {
                "type": "object",
                "description": "A container for storing arbitrary metadata. This might be altered by API."
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "discounts_applied": {
            "oneOf": [
              {
                "type": "array",
                "items": {
                  "type": "object",
                  "description": "Any applied discounts as they happened at transaction creation time."
                }
              },
              {
                "type": "null"
              }
            ],
            "default": []
          },
          "delegated": {
            "oneOf": [
              {
                "type": "boolean",
                "example": "false",
                "description": "Described whether a transaction was a originated by any other device or service that is not directly inside the client account. This can be online systems, external systems or other Tillhub POS clients inside other client accounts."
              },
              {
                "type": "null"
              }
            ],
            "default": false
          },
          "origins": {
            "oneOf": [
              {
                "type": "array",
                "description": "A list of Tillhub resources that caused this transaction, e.g. a stored cart",
                "items": {
                  "type": "object"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "related_to": {
            "oneOf": [
              {
                "type": "array",
                "description": "A list of Tillhub resources that this transaction is related to, e.g. an invoice object that tracks the lifetime of that invoice",
                "items": {
                  "type": "object"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "depends_on": {
            "oneOf": [
              {
                "type": "array",
                "description": "A list of Tillhub resources that this transaction directly depends on, e.g. a refund for a previous sale",
                "items": {
                  "type": "object"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "location": {
            "oneOf": [
              {
                "type": "object",
                "additionalProperties": false,
                "example": "{ \"lat\": 52.5065133, \"lng\": 13.1445545}",
                "description": "Geospatial data of this transaction",
                "required": [
                  "lat",
                  "lng"
                ],
                "properties": {
                  "lat": {
                    "type": "number"
                  },
                  "lng": {
                    "type": "number"
                  }
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null
          },
          "insert_id": {
            "type": "number",
            "example": "128",
            "description": "The sequential database insert ID. Consecutiveness is not guaranteed."
          },
          "hashes": {
            "type": "object",
            "description": "Hashes to check consistency of the data fields of this transactions that are hashable.",
            "properties": {
              "sha512_v0": {
                "type": "string",
                "minLength": 512,
                "maxLength": 512,
                "description": "The v0 implementation of the transaction hash "
              }
            }
          },
          "self": {
            "type": "object",
            "description": "All references to this transaction",
            "properties": {
              "uri": {
                "type": "string",
                "format": "url"
              },
              "block_transaction": {
                "type": "string",
                "maxLength": 512,
                "default": null
              }
            }
          },
          "block": {
            "type": "object",
            "description": "The block this transaction is stored in and it's references.",
            "properties": {
              "id": {
                "type": "string",
                "description": "The actual block."
              },
              "previous": {
                "type": "string",
                "description": "The previous block."
              },
              "transaction": {
                "type": "string",
                "description": "The block transaction id."
              }
            }
          },
          "previous": {
            "type": "string",
            "format": "uuid",
            "example": "05321210-4546-400d-b70b-e059fef52fc4",
            "description": "The previous transaction on the server. Consecutiveness is server only. Stale offline transactions are not accommodated here."
          },
          "exchange_rates": {
            "type": "array",
            "description": "The relevant exchange rates of this transaction at transaction time.",
            "items": {
              "type": "object"
            }
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [],
              "properties": {
                "id": {
                  "type": "string",
                  "format": "uuid",
                  "description": "The item resource reference ID."
                },
                "transaction": {
                  "type": "string",
                  "format": "uuid",
                  "description": "The transaction resource reference ID."
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2018-11-04T23:18:43.075Z",
                  "description": "The server creation time of this transaction."
                },
                "amount": {
                  "description": "The payable amount on the units qty base of 1.",
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "net": {
                      "type": "number",
                      "minimum": -1000000,
                      "maximum": 1000000,
                      "multipleOf": 0.01
                    },
                    "gross": {
                      "type": "number",
                      "minimum": -1000000,
                      "maximum": 1000000,
                      "multipleOf": 0.01
                    }
                  }
                },
                "amount_total": {
                  "description": "The payable amount. Amount multiplied by qty.",
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "net": {
                      "type": "number",
                      "minimum": -1000000,
                      "maximum": 1000000,
                      "multipleOf": 0.01
                    },
                    "gross": {
                      "type": "number",
                      "minimum": -1000000,
                      "maximum": 1000000,
                      "multipleOf": 0.01
                    }
                  }
                },
                "revenue": {
                  "description": "The total of this item excluding decrements like discounts.",
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "net": {
                      "type": "number",
                      "minimum": -1000000,
                      "maximum": 1000000,
                      "multipleOf": 0.01
                    },
                    "gross": {
                      "type": "number",
                      "minimum": -1000000,
                      "maximum": 1000000,
                      "multipleOf": 0.01
                    }
                  }
                },
                "type": {
                  "type": "string",
                  "description": "The type of item.",
                  "enum": [
                    "item",
                    "refund",
                    "discount",
                    "tip"
                  ]
                },
                "position": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "number",
                      "description": "The position description of the item. E.g. positon 1 (2, 3 etc.) in the cart.",
                      "example": "1",
                      "maximum": 32767,
                      "minimum": 0
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "qty": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "number",
                      "description": "The quantity of this item.",
                      "example": "100",
                      "minimum": -32767,
                      "maximum": 32767,
                      "multipleOf": 0.001
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "unit": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "The metric unit of this item. E.g. 1.754 kg(!) vegetables.",
                      "example": "kg"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "date": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2018-01-29T14:55:05.000Z",
                  "description": "A user defined [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) compliant date e.g. 2018-01-29T14:55:05.000Z. This is used to track local client time as oppsed to `created_at`, which is the time the server has received it. This is necessary for e.g. offline client, and is valid time in fiscal reports. If none is provided it will default to the transaction's date."
                },
                "name": {
                  "type": "string",
                  "description": "The nomenclature for this item, which is fiscally required.",
                  "example": "Packaged beans, green"
                },
                "currency": {
                  "type": "string",
                  "description": "The three letter [ISO currency](https://en.wikipedia.org/wiki/ISO_4217) of this item.",
                  "example": "",
                  "minLength": 3,
                  "maxLength": 3
                },
                "product": {
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "description": "The Tillhub product resource reference ID.",
                      "example": "43847a66-97dc-4ac2-8e8a-c44920e1f22f"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "custom_id": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "Any custom ID, e.g. a product number",
                      "example": "AKI-1234566"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "vat_rate": {
                  "type": "string",
                  "description": "The VAT rate of this item. E.g. 0.19 for 19% German VAT. If no VAT applies, set to 0.",
                  "example": "0.19",
                  "minimum": 0,
                  "maximum": 1,
                  "multipleOf": 0.001
                },
                "branch": {
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "example": "f2ac2cae-97ff-42a1-967b-0a35222ab6d1",
                      "description": "The Tillhub branch location ID."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "register": {
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "example": "9d110eb2-2245-4e14-9574-49b502f3a9b3",
                      "description": "The Tillhub register location ID."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "salesman_staff": {
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "example": "b3465a62-62e9-46de-9df7-4d3009c46068",
                      "description": "The Tillhub staff (as salesman) resource ID, that has generated this transaction."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "tax": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "The applicable Tillhub tax resource with tax accounts.",
                      "example": "a3be1e02-7983-4cba-b7b8-94453c0536ef"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "account": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "The applicable Tillhub (revenue) account.",
                      "example": "a5380b42-6025-49de-bb1d-c9357df96506"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "client_id": {
                  "oneOf": [
                    {
                      "type": "string",
                      "example": "d0d40841-b1a7-438a-9d1e-2bfec590d2e3",
                      "minLength": 6,
                      "maxLength": 64,
                      "description": "A implementer defined identifier. This can be used for local resource matching and has no business implication."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "product_group": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "description": "The Tillhub product group resource reference ID.",
                      "example": "897bac99-f98e-433a-bca0-19acc380fb12"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "tax_amount": {
                  "description": "The tax amount on the per unit qty base of 1.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "tax_amount_total": {
                  "description": "The total tax amount.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "discount_amount": {
                  "default": 0,
                  "description": "The discount amount on the per unit qty base of 1.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "discount_amount_total": {
                  "default": 0,
                  "description": "The total discount amount.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "discounts": {
                  "oneOf": [
                    {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "description": "Any applied discounts as they happened at transaction creation time.",
                        "properties": {
                          "amount": {
                            "type": "number"
                          },
                          "amount_total": {
                            "type": "number"
                          },
                          "order_index": {
                            "type": "integer"
                          },
                          "currency": {
                            "type": "string",
                            "minLength": 3,
                            "maxLength": 3
                          },
                          "value": {
                            "oneOf": [
                              {
                                "type": "number"
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "rate": {
                            "oneOf": [
                              {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 1
                              },
                              {
                                "type": "null"
                              }
                            ]
                          },
                          "client_id": {
                            "type": "string",
                            "maxLength": 128
                          },
                          "group": {
                            "type": "string",
                            "enum": [
                              "customer",
                              "staff",
                              "cart",
                              "product_set"
                            ]
                          },
                          "name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 128
                          }
                        },
                        "required": [
                          "amount",
                          "amount_total",
                          "currency",
                          "name",
                          "value",
                          "rate"
                        ]
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": []
                },
                "attributes": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "A map of attributes of this transaction item, e.g. product properties",
                      "example": "{\"color\": \"blue\"}",
                      "maxProperties": 10
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "stock_change_enabled": {
                  "default": true,
                  "type": "boolean",
                  "description": "The flag that describes whether an actual stock change was enabled or overridden at transaction time."
                },
                "origins": {
                  "oneOf": [
                    {
                      "type": "array",
                      "description": "A list of Tillhub resources that caused this transaction, e.g. a stored cart",
                      "items": {
                        "type": "object"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "related_to": {
                  "oneOf": [
                    {
                      "type": "array",
                      "description": "A list of Tillhub resources that this transaction is related to, e.g. an invoice object that tracks the lifetime of that invoice",
                      "items": {
                        "type": "object"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "depends_on": {
                  "oneOf": [
                    {
                      "type": "array",
                      "description": "A list of Tillhub resources that this transaction directly depends on, e.g. a refund for a previous sale",
                      "items": {
                        "type": "object"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "comments": {
                  "oneOf": [
                    {
                      "type": "string",
                      "example": "Did this sale. Went to the next one.",
                      "maxLength": 8192,
                      "description": "Any arbitrary comment."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "external_reference_id": {
                  "oneOf": [
                    {
                      "type": "string",
                      "example": "823742686434462376376376473647346",
                      "maxLength": 128,
                      "description": "Any identifier a user wants to store in the transaction system. E.g. an ID in a thirdy party ERP."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "external_reference": {
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "A generic reference container as a user defined object.",
                      "maxProperties": 10
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "amount_net": {
                  "description": "The payable net amount on the units qty base of 1, after decrementing applicable discounts etc. This value needs to be lower than or equal to the respective unti amount.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "amount_gross": {
                  "description": "The payable gross amount on the units qty base of 1, after decrementing applicable discounts etc.  This value needs to be lower than or equal to the respective unti amount.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "amount_total_net": {
                  "description": "The payable net amount total, after decrementing applicable discounts etc. This value needs to be lower than or equal to the respective unti amount.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "amount_total_gross": {
                  "description": "The payable net amount total, after decrementing applicable discounts etc. This value needs to be lower than or equal to the respective unti amount.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "amount_unit_net": {
                  "description": "The original qty base 1 item net amount, e.g. the product shelf price",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "amount_unit_gross": {
                  "description": "The original qty base 1 item net amount, e.g. the product shelf price",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "insert_id": {
                  "type": "number",
                  "example": "128",
                  "description": "The sequential database insert ID. Consecutiveness is not guaranteed."
                },
                "client_account": {
                  "type": "string",
                  "minLength": 32,
                  "maxLength": 36,
                  "example": "061f91a3-eba2-40b8-9a76-115189d6741e",
                  "description": "The Tillhub client account ID. Note: this will usually be a uuid v4, however you might receive a capitalised dash-stripped version of it, if you hold a legsacy account."
                },
                "stock": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "The Tillhub stock resource reference ID. Stock is the tracking system on a per location per product basis.",
                      "example": "47db52a1-c280-4891-b510-6adc0439b262"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "stock_change": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "The embedded stock change."
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "stock_book_item": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "The Tillhub stock book resource reference ID. Stock book items describe the stock change, e.g. from / to, qty etc..",
                      "example": "2b271662-e9d0-4777-8cb2-e58e3d53fc3f"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            }
          },
          "payments": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [],
              "properties": {
                "id": {
                  "type": "string",
                  "format": "uuid",
                  "description": "The item resource reference ID."
                },
                "transaction": {
                  "type": "string",
                  "format": "uuid",
                  "description": "The transaction resource reference ID."
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2018-11-04T23:18:43.075Z",
                  "description": "The server creation time of this transaction."
                },
                "type": {
                  "type": "string",
                  "description": "",
                  "enum": [
                    "card",
                    "cash",
                    "card_opi",
                    "card_concardis",
                    "voucher"
                  ]
                },
                "payment_option": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "description": "The Tillhub payment option resource reference ID.",
                      "example": "bd7d8a90-83d1-4d53-8659-b205b409d6e1"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "position": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "number",
                      "description": "The position description of the payment item. E.g. positon 1 (2, 3 etc.) in the cart.",
                      "example": "1",
                      "maximum": 32767,
                      "minimum": 0
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "date": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2018-01-29T14:55:05.000Z",
                  "description": "A user defined [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) compliant date e.g. 2018-01-29T14:55:05.000Z. This is used to track local client time as oppsed to `created_at`, which is the time the server has received it. This is necessary for e.g. offline client, and is valid time in fiscal reports. If none is provided it will default to the transaction's date."
                },
                "name": {
                  "type": "string",
                  "description": "The nomenclature for this item, which is fiscally required.",
                  "example": "Packaged beans, green"
                },
                "currency": {
                  "type": "string",
                  "description": "The three letter [ISO currency](https://en.wikipedia.org/wiki/ISO_4217) of this item.",
                  "example": "",
                  "minLength": 3,
                  "maxLength": 3
                },
                "amount_total": {
                  "description": "The payed amount total.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01
                },
                "tip_total": {
                  "description": "The payed amount total.",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01,
                  "default": null
                },
                "amount_given": {
                  "description": "The actual over the counter money flow: regardles what needs to be payed e.g. 49.98, but the customer has given. This is usually of interest in cash payments, or when when customers gave fewer amount than they ought to pay.",
                  "example": "50.00",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01,
                  "default": null
                },
                "amount_requested": {
                  "description": "The amount that was requested by the POS e.g. 49.98, regardless of what was given e.g. 50.00. Hence the rest is change or tip. This is usually of interest in cash payments.",
                  "example": "49.98",
                  "type": "number",
                  "minimum": -1000000,
                  "maximum": 1000000,
                  "multipleOf": 0.01,
                  "default": null
                },
                "custom_id": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "Any custom ID, e.g. a rolling payment number",
                      "example": "1234566"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "branch": {
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "example": "f2ac2cae-97ff-42a1-967b-0a35222ab6d1",
                      "description": "The Tillhub branch location ID. If none is specified we will use the one from the transaction."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "register": {
                  "oneOf": [
                    {
                      "type": "string",
                      "format": "uuid",
                      "example": "9d110eb2-2245-4e14-9574-49b502f3a9b3",
                      "description": "The Tillhub register location ID. If none is specified we will use the one from the transaction."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "cost_center": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "Any external reference to a cost center e.g. in enterprise environments.",
                      "example": "CORP-123"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "account": {
                  "default": null,
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "The applicable Tillhub account e.g for this payment type.",
                      "example": "a5380b42-6025-49de-bb1d-c9357df96506"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "client_id": {
                  "oneOf": [
                    {
                      "type": "string",
                      "example": "d0d40841-b1a7-438a-9d1e-2bfec590d2e3",
                      "minLength": 6,
                      "maxLength": 64,
                      "description": "A implementer defined identifier. This can be used for local resource matching and has no business implication."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "comments": {
                  "oneOf": [
                    {
                      "type": "string",
                      "example": "Did this sale. Went to the next one.",
                      "maxLength": 8192,
                      "description": "Any arbitrary comment."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "origins": {
                  "oneOf": [
                    {
                      "type": "array",
                      "description": "A list of Tillhub resources that caused this transaction, e.g. a stored cart",
                      "items": {
                        "type": "object"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "related_to": {
                  "oneOf": [
                    {
                      "type": "array",
                      "description": "A list of Tillhub resources that this transaction is related to, e.g. an invoice object that tracks the lifetime of that invoice",
                      "items": {
                        "type": "object"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "depends_on": {
                  "oneOf": [
                    {
                      "type": "array",
                      "description": "A list of Tillhub resources that this transaction directly depends on, e.g. a refund for a previous sale",
                      "items": {
                        "type": "object"
                      }
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "external_reference_id": {
                  "oneOf": [
                    {
                      "type": "string",
                      "example": "823742686434462376376376473647346",
                      "maxLength": 128,
                      "description": "Any identifier a user wants to store in the transaction system. E.g. an ID in a thirdy party ERP."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "external_reference": {
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "A generic reference container as a user defined object.",
                      "maxProperties": 10
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "metadata": {
                  "oneOf": [
                    {
                      "type": "object",
                      "description": "A container for storing arbitrary metadata. This might be altered by API."
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null
                },
                "insert_id": {
                  "type": "number",
                  "example": "128",
                  "description": "The sequential database insert ID. Consecutiveness is not guaranteed."
                },
                "client_account": {
                  "type": "string",
                  "minLength": 32,
                  "maxLength": 36,
                  "example": "061f91a3-eba2-40b8-9a76-115189d6741e",
                  "description": "The Tillhub client account ID. Note: this will usually be a uuid v4, however you might receive a capitalised dash-stripped version of it, if you hold a legsacy account."
                }
              }
            }
          },
          "status": {
            "type": "object",
            "additionalProperties": false,
            "required": [],
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid",
                "description": "The item resource reference ID."
              },
              "created_at": {
                "type": "string",
                "format": "date-time",
                "example": "2018-11-04T23:18:43.075Z",
                "description": "The server creation time of this transaction."
              },
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "example": "2018-11-04T23:18:43.075Z",
                "description": "The server update time of this transaction. Transactions are immutable in and out themselves, however statuses might change, which is reflected in this value. This can for example happen if a signing request for this transaction was not possible and needed to be dealt with later."
              },
              "status": {
                "type": "string",
                "description": "The current status transition of this transaction. A regular transaction will receive the status `complete` immediately. When signing is requested `complete` will only be assigned after signing.",
                "enum": [
                  "signing_requested",
                  "complete"
                ]
              },
              "metadata": {
                "oneOf": [
                  {
                    "type": "object",
                    "description": "A container for storing arbitrary metadata. This might be altered by API."
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null
              },
              "dispatched_at": {
                "oneOf": [
                  {
                    "type": "string",
                    "format": "date-time",
                    "example": "2018-11-04T23:18:43.075Z",
                    "description": "The actual time a dsipatchable transaction was dispatched, e.g. an invoice has been sent and results in an oblicgation from that time on."
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "signed_at": {
                "oneOf": [
                  {
                    "type": "string",
                    "format": "date-time",
                    "example": "2018-01-29T14:55:05.000Z",
                    "description": "A signing system defined [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) compliant date e.g. 2018-01-29T14:55:05.000Z. The date will be set after having fully signed this transaction."
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "signature": {
                "oneOf": [
                  {
                    "type": "object",
                    "description": "The singing data that can be used to print singing results or as fiscal reference.",
                    "properties": {
                      "format": {
                        "type": "string",
                        "enum": [
                          "qr",
                          "aztec",
                          "code128"
                        ]
                      },
                      "data": {
                        "type": "string",
                        "example": "{\"data_for_a\": \"qr_code\"}",
                        "maxLength": 16384,
                        "description": "A barcade container of any type with which this transaction is associated."
                      },
                      "caption": {
                        "default": null,
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 128
                      },
                      "payload": {
                        "description": "The original signing response by the signing provider.",
                        "default": null,
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    }
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "signature_type": {
                "oneOf": [
                  {
                    "type": "string",
                    "description": "Any allowed singing system provider as type.",
                    "enum": [
                      "fiskaltrust"
                    ]
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            }
          }
        }
      }
    }
  }
}

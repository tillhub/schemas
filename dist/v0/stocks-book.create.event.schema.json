{
  "$id": "https://schemas.tillhub.com/v0/stocks-book.create.event.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "id",
    "qty_change",
    "product",
    "location"
  ],
  "properties": {
    "id": {
      "description": "Unique stock book ID",
      "type": "string",
      "format": "uuid",
      "example": "936835f7-2d75-41d2-9001-38ed6e458328"
    },
    "qty_change": {
      "description": "The quantity change with the book",
      "example": -2,
      "type": "number"
    },
    "type": {
      "oneOf": [
        {
          "description": "The type of stock book",
          "type": "string",
          "enum": [
            "add",
            "deduct",
            "goods_in",
            "goods_out",
            "relocation",
            "sale",
            "cancellation",
            "refund",
            "delivery_note",
            "delivery_note_refund",
            "delivery_note_cancellation"
          ]
        },
        {
          "type": "null"
        }
      ]
    },
    "product": {
      "description": "The product which stock was affected",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "description": "Unique entity ID",
          "type": "string",
          "format": "uuid",
          "example": "936835f7-2d75-41d2-9001-38ed6e458328"
        },
        "name": {
          "description": "Product name",
          "type": "string",
          "maxLength": 512
        },
        "client_id": {
          "description": "A client definable ID for the purpose of syncing to a client or used in analytics for e.g. transactions that created a product offline and done transactions offline before they received a backend ID.",
          "oneOf": [
            {
              "type": "string",
              "maxLength": 128
            },
            {
              "type": "null"
            }
          ]
        },
        "custom_id": {
          "description": "The product number",
          "anyOf": [
            {
              "type": "string",
              "example": "0000000028-000008"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "location": {
      "description": "The location the stock was booked at",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "description": "Unique entity ID",
          "type": "string",
          "format": "uuid",
          "example": "936835f7-2d75-41d2-9001-38ed6e458328"
        },
        "name": {
          "description": "Any arbitrary name for a branch that can be displayed in applications.",
          "example": "Head office",
          "anyOf": [
            {
              "type": "string",
              "maxLength": 64,
              "minLength": 1
            },
            {
              "type": "null"
            }
          ]
        },
        "custom_id": {
          "description": "Branch custom unique ID.",
          "example": "dd3234of",
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "branch_number": {
          "type": "number",
          "description": "The maximum stems from the fact that is it stored as an postgres int4 type, with 4 bytes of space",
          "example": 107,
          "minimum": 0,
          "maximum": 2147483647
        },
        "metadata": {
          "description": "Arbitrary user defined data.",
          "type": "object",
          "maxProperties": 10
        }
      }
    },
    "reason": {
      "oneOf": [
        {
          "description": "The reason of stock book",
          "type": "string"
        },
        {
          "type": "null"
        }
      ]
    }
  }
}
